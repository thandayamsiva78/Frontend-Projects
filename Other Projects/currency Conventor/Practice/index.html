<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <form id="container">
        <header>
            <h1>Currency Converter</h1>
        </header>
        <section class="Currency">
            <div class="fromCurrency">
                <label for="From">From</label>
                <select name="fromCurrency" id="fromCurrency">
                <!-- options -->
                </select>
            </div>
            <div class="toCurrency">
                <label for="to">To</label>
                <select name="toCurrency" id="toCurrency">
                <!-- options -->
                </select>
            </div>
        </section>
        <section class="amount-result">
            <div>
                <label for="amount">Amount</label>
                <input type="number" id="amount" placeholder="Enter Amount">
            </div>
            <div>
                <label for="result">Result</label>
                <input type="text" id="result" readonly placeholder="Converted Amount">
            </div>
        </section>
        <section>
            <button id="convert">Convert</button>
        </section>
    </form>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let listOfCurrencies = {};

            fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies.json")
                .then((res) => res.json())
                .then((res) => {
                    listOfCurrencies = res;
                    buildListOfCurrencies();
                });

            function buildListOfCurrencies() {
                for (let key in listOfCurrencies) {
                    const fromCurrency = document.getElementById("fromCurrency");
                    const toCurrency = document.getElementById("toCurrency");

                    const fromOption = document.createElement("option");
                    fromOption.id = `${key}_from`;
                    fromOption.value = key;
                    fromOption.textContent = listOfCurrencies[key];
                    fromCurrency.appendChild(fromOption);

                    const toOption = document.createElement("option");
                    toOption.id =  `${key}_to`;
                    toOption.value = key;
                    toOption.textContent = listOfCurrencies[key];
                    toCurrency.appendChild(toOption);
                }
            }

            document.getElementById("convert").addEventListener("click", function(event) {
                event.preventDefault();

                const fromCurrency = document.getElementById("fromCurrency").value;
                const toCurrency = document.getElementById("toCurrency").value;
                const amount = document.getElementById("amount").value;

                if (!amount || amount < 0) {
                    alert("Please enter a valid amount");
                    return;
                }

                fetch("https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/${fromCurrency}/${toCurrency}.json")
                    .then((res) => res.json())
                    .then((data) => {
                        const conversionRate = data[toCurrency];
                        const convertedAmount = amount * conversionRate;
                        document.getElementById("result").value = convertedAmount.toFixed(2);
                    });
            });
        });
    </script>
</body>
</html>